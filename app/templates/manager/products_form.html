{% extends 'base.html' %}

{% block title %}
  {% if mode=='new' %}
    Новий тип товару
  {% else %}
    Редагувати тип товару
  {% endif %} — ZLAGODA
{% endblock %}

{% block content %}
  <h2 class="mb-4">
    {% if mode=='new' %}Новий тип товару{% else %}Редагувати тип товару{% endif %}
  </h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="alert alert-{{ category }} mb-3">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="post">
    <div class="mb-3">
      <label for="name" class="form-label">Назва типу</label>
      <input
        id="name"
        type="text"
        name="name"
        class="form-control"
        value="{{ product_type.name|default('') }}"
        required
      >
    </div>

    <div class="mb-3">
      <label for="category" class="form-label">Категорія</label>
      <input
        id="category"
        list="cat-list"
        name="category"
        class="form-control"
        value="{{ product_type.category|default('') }}"
        required
      >
      <datalist id="cat-list">
        {% for c in categories %}
          <option value="{{ c }}"></option>
        {% endfor %}
      </datalist>
      <div class="form-text">
        Почніть вводити й оберіть одну з існуючих категорій.
      </div>
    </div>

    <button type="submit" class="btn btn-primary">
      {% if mode=='new' %}Створити{% else %}Зберегти{% endif %}
    </button>
    <a href="{{ url_for('manager.products') }}" class="btn btn-secondary ms-2">
      Скасувати
    </a>
  </form>
{% endblock %}
