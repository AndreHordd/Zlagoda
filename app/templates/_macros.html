{# templates/_macros.html #}
{% macro sort_th(endpoint, col, label,
                 current_sort, current_order,
                 category=None, promo=None,
                 field=None, search=None) -%}
  {%- if current_sort == col and current_order == 'asc' -%}
    {%- set next_order = 'desc' -%}
  {%- else -%}
    {%- set next_order = 'asc' -%}
  {%- endif -%}
  <th>
    <a href="{{ url_for(endpoint,
                        sort_by=col,
                        order=next_order,
                        category=category,
                        promo=promo,
                        field=field,
                        search=search) }}"
       class="btn btn-link btn-sm p-0">
      {{ label }}
      {%- if current_sort == col -%}
        {{ '↑' if current_order == 'asc' else '↓' }}
      {%- endif -%}
    </a>
  </th>
{%- endmacro %}
